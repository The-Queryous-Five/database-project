<mxfile host="app.diagrams.net" modified="2024-12-21T00:00:00.000Z" agent="Placeholder" version="1.0">
  <diagram name="Normalization Before After" id="normalization-example">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- INSTRUCTIONS -->
        <mxCell id="instructions" value="NORMALIZATION BEFORE/AFTER PLACEHOLDER&#xa;&#xa;Open in Draw.io to edit this diagram.&#xa;&#xa;BEFORE (Unnormalized):&#xa;Show one big table with all order data:&#xa;- Order columns: order_id, order_status, order_date&#xa;- Customer columns: customer_name, customer_city, customer_state&#xa;- Product columns: product_name, product_category, product_price&#xa;- Seller columns: seller_name, seller_city&#xa;- Payment columns: payment_type, payment_value&#xa;&#xa;Problems:&#xa;- Data redundancy (customer info repeated for each order)&#xa;- Update anomalies (change customer city → update all rows)&#xa;- Insertion anomalies (can't add customer without order)&#xa;- Deletion anomalies (delete order → lose customer info)&#xa;&#xa;AFTER (3NF/BCNF):&#xa;Show 5 normalized tables:&#xa;1. customers (customer_id, name, city, state)&#xa;2. orders (order_id, customer_id FK, status, date)&#xa;3. order_items (order_id FK, item_id, product_id FK, seller_id FK, price)&#xa;4. products (product_id, name, category)&#xa;5. sellers (seller_id, name, city)&#xa;&#xa;FUNCTIONAL DEPENDENCIES:&#xa;Show FD arrows:&#xa;order_id → order_status, order_date, customer_id&#xa;customer_id → customer_name, customer_city, customer_state&#xa;product_id → product_name, product_category&#xa;&#xa;Use colors:&#xa;- Red: Unnormalized table (problems highlighted)&#xa;- Green: Normalized tables (clean design)&#xa;- Blue: FD arrows" 
          style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontFamily=Courier New;" 
          vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="400" height="700" as="geometry" />
        </mxCell>
        
        <!-- BEFORE: Unnormalized Table -->
        <mxCell id="before-title" value="BEFORE: Unnormalized (0NF)" 
          style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" 
          vertex="1" parent="1">
          <mxGeometry x="500" y="40" width="600" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="unnormalized-table" value="Orders_All_Data (Denormalized)&#xa;════════════════════════════════════════════════════════════════&#xa;order_id | order_status | order_date | customer_name | customer_city | customer_state | product_name | product_category | product_price | seller_name | seller_city | payment_type | payment_value&#xa;─────────────────────────────────────────────────────────────────&#xa;001      | delivered    | 2017-10-15 | João Silva    | São Paulo     | SP             | Laptop       | Electronics      | 2500.00       | TechStore   | Campinas    | credit_card  | 2500.00&#xa;002      | delivered    | 2017-10-20 | João Silva    | São Paulo     | SP             | Mouse        | Electronics      | 50.00         | TechStore   | Campinas    | credit_card  | 50.00&#xa;003      | shipped      | 2017-11-01 | Maria Santos  | Rio de Janeiro| RJ             | Chair        | Furniture        | 300.00        | HomeGoods   | São Paulo   | boleto       | 300.00&#xa;004      | delivered    | 2017-11-05 | João Silva    | São Paulo     | SP             | Desk         | Furniture        | 800.00        | HomeGoods   | São Paulo   | credit_card  | 800.00" 
          style="whiteSpace=wrap;html=1;align=left;fontSize=10;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Courier New;" 
          vertex="1" parent="1">
          <mxGeometry x="500" y="80" width="600" height="180" as="geometry" />
        </mxCell>
        
        <!-- PROBLEMS -->
        <mxCell id="problems-box" value="PROBLEMS:&#xa;❌ Data Redundancy: &quot;João Silva&quot; + &quot;São Paulo&quot; + &quot;SP&quot; repeated 3 times&#xa;❌ Update Anomaly: Change João's city → must update 3 rows&#xa;❌ Insertion Anomaly: Can't add new customer without an order&#xa;❌ Deletion Anomaly: Delete order 002 → still keep João's info elsewhere&#xa;❌ Storage Waste: Customer/product data duplicated" 
          style="whiteSpace=wrap;html=1;align=left;fontSize=12;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1;" 
          vertex="1" parent="1">
          <mxGeometry x="500" y="280" width="600" height="100" as="geometry" />
        </mxCell>
        
        <!-- NORMALIZATION ARROW -->
        <mxCell id="normalization-arrow" value="NORMALIZATION&#xa;(1NF → 2NF → 3NF)" 
          style="endArrow=classic;html=1;rounded=0;strokeWidth=5;strokeColor=#82b366;fillColor=#d5e8d4;fontSize=14;fontStyle=1;" 
          edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="430" as="sourcePoint" />
            <mxPoint x="1100" y="430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- AFTER: Normalized Tables -->
        <mxCell id="after-title" value="AFTER: Normalized (3NF/BCNF)" 
          style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" 
          vertex="1" parent="1">
          <mxGeometry x="500" y="460" width="600" height="30" as="geometry" />
        </mxCell>
        
        <!-- Table 1: customers -->
        <mxCell id="table-customers-norm" value="customers&#xa;═════════════════════&#xa;PK: customer_id&#xa;────────────────────&#xa;customer_id | customer_name | customer_city  | customer_state&#xa;────────────────────────────────────────────────────────────&#xa;C001        | João Silva    | São Paulo      | SP&#xa;C002        | Maria Santos  | Rio de Janeiro | RJ" 
          style="whiteSpace=wrap;html=1;align=left;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Courier New;" 
          vertex="1" parent="1">
          <mxGeometry x="500" y="500" width="280" height="120" as="geometry" />
        </mxCell>
        
        <!-- Table 2: orders -->
        <mxCell id="table-orders-norm" value="orders&#xa;════════════════════════════════&#xa;PK: order_id, FK: customer_id&#xa;────────────────────────────────&#xa;order_id | customer_id | order_status | order_date&#xa;─────────────────────────────────────────────────&#xa;001      | C001        | delivered    | 2017-10-15&#xa;002      | C001        | delivered    | 2017-10-20&#xa;003      | C002        | shipped      | 2017-11-01&#xa;004      | C001        | delivered    | 2017-11-05" 
          style="whiteSpace=wrap;html=1;align=left;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Courier New;" 
          vertex="1" parent="1">
          <mxGeometry x="820" y="500" width="280" height="140" as="geometry" />
        </mxCell>
        
        <!-- Table 3: products -->
        <mxCell id="table-products-norm" value="products&#xa;═══════════════════════════════════&#xa;PK: product_id&#xa;───────────────────────────────────&#xa;product_id | product_name | product_category&#xa;────────────────────────────────────────────────&#xa;P001       | Laptop       | Electronics&#xa;P002       | Mouse        | Electronics&#xa;P003       | Chair        | Furniture&#xa;P004       | Desk         | Furniture" 
          style="whiteSpace=wrap;html=1;align=left;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Courier New;" 
          vertex="1" parent="1">
          <mxGeometry x="500" y="640" width="280" height="120" as="geometry" />
        </mxCell>
        
        <!-- Table 4: order_items -->
        <mxCell id="table-order-items-norm" value="order_items (Weak Entity)&#xa;═══════════════════════════════════════════════════════&#xa;PK: (order_id, order_item_id)&#xa;FKs: order_id, product_id, seller_id&#xa;───────────────────────────────────────────────────────&#xa;order_id | order_item_id | product_id | seller_id | price&#xa;─────────────────────────────────────────────────────────────&#xa;001      | 1             | P001       | S001      | 2500.00&#xa;002      | 1             | P002       | S001      | 50.00&#xa;003      | 1             | P003       | S002      | 300.00&#xa;004      | 1             | P004       | S002      | 800.00" 
          style="whiteSpace=wrap;html=1;align=left;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Courier New;" 
          vertex="1" parent="1">
          <mxGeometry x="820" y="660" width="280" height="140" as="geometry" />
        </mxCell>
        
        <!-- BENEFITS -->
        <mxCell id="benefits-box" value="BENEFITS:&#xa;✅ No Redundancy: Each fact stored once&#xa;✅ Update Anomaly Fixed: Change customer city in 1 place&#xa;✅ Insertion Anomaly Fixed: Can add customer without order&#xa;✅ Deletion Anomaly Fixed: Delete order keeps customer/product data&#xa;✅ Storage Efficient: ~60% space saved" 
          style="whiteSpace=wrap;html=1;align=left;fontSize=12;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" 
          vertex="1" parent="1">
          <mxGeometry x="500" y="820" width="600" height="100" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
